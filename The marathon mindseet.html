<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Marathon Mindset</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Courier New', monospace;
      background: #1a1a2e;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    
    #game-container {
      position: relative;
      width: 1000px;
      height: 580px;
      background: linear-gradient(180deg, #16213e 0%, #1a1a2e 100%);
      border: 3px solid #00ff88;
      box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
      overflow: hidden;
    }
    
    canvas {
      display: block;
    }
    
    #header {
      width: 1000px;
      padding: 15px 20px;
      text-align: center;
      color: #00ff88;
    }
    
    #header h1 {
      font-size: 26px;
      letter-spacing: 4px;
      text-shadow: 0 0 10px #00ff88;
      margin-bottom: 5px;
    }
    
    #header p {
      font-size: 13px;
      opacity: 0.7;
    }
    
    #controls {
      width: 1000px;
      padding: 15px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }
    
    button {
      padding: 12px 32px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      border: 2px solid #00ff88;
      background: transparent;
      color: #00ff88;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 2px;
      transition: all 0.3s ease;
    }
    
    button:hover {
      background: #00ff88;
      color: #1a1a2e;
      box-shadow: 0 0 20px #00ff88;
    }
    
    #legend {
      width: 1000px;
      padding: 10px 20px;
      display: flex;
      justify-content: space-around;
      color: #fff;
      font-size: 11px;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      max-width: 300px;
    }
    
    .legend-color {
      width: 14px;
      height: 14px;
      border-radius: 2px;
      flex-shrink: 0;
    }
    
    .color-sprinter { background: #ff0080; }
    .color-steady { background: #ffcc00; }
    .color-strategic { background: #00ff88; }
  </style>
</head>
<body>
  <div id="header">
    <h1>THE MARATHON MINDSET</h1>
    <p>Training for the goal ‚Äî Three approaches over time</p>
  </div>
  
  <div id="game-container">
    <canvas id="game"></canvas>
  </div>
  
  <div id="legend">
    <div class="legend-item">
      <div class="legend-color color-sprinter"></div>
      <span><b>SPRINTER</b> ‚Äî Goes hard every day. Burns out. Can't train anymore.</span>
    </div>
    <div class="legend-item">
      <div class="legend-color color-steady"></div>
      <span><b>COMFORTABLE</b> ‚Äî Never pushes. Grows slowly, then plateaus forever.</span>
    </div>
    <div class="legend-item">
      <div class="legend-color color-strategic"></div>
      <span><b>STRATEGIC</b> ‚Äî Intervals, rest days, gradual increase. Reaches the goal.</span>
    </div>
  </div>
  
  <div id="controls">
    <button id="start-btn">Start Journey</button>
    <button id="reset-btn">Reset</button>
  </div>

  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    
    canvas.width = 1000;
    canvas.height = 580;
    
    // Constants
    const LANE_HEIGHT = 120;
    const LANE_Y = [100, 230, 360];
    const START_X = 100;
    const TRACK_END_X = 900;
    const MAX_KM = 42;
    const GROUND_OFFSET = 75;
    
    const kmToX = (km) => START_X + (TRACK_END_X - START_X) * (km / MAX_KM);
    
    const COLORS = {
      sprinter: '#ff0080',
      steady: '#ffcc00',
      strategic: '#00ff88'
    };
    
    // Training plans - array of {type, targetKm, intensity}
    // Types: 'run', 'intervals', 'rest', 'race'
    const TRAINING_PLANS = {
      sprinter: [
        { type: 'run', targetKm: 8, intensity: 'max', label: 'Hard 8K' },
        { type: 'run', targetKm: 10, intensity: 'max', label: 'Hard 10K' },
        { type: 'run', targetKm: 10, intensity: 'max', label: 'Push 10K' },
        { type: 'run', targetKm: 8, intensity: 'high', label: 'Struggling 8K' },
        { type: 'run', targetKm: 5, intensity: 'medium', label: 'Tired 5K' },
        { type: 'run', targetKm: 3, intensity: 'low', label: 'Exhausted...' },
        { type: 'run', targetKm: 1, intensity: 'crawl', label: 'Can\'t go on' },
        { type: 'rest', targetKm: 0, intensity: 'forced', label: 'Injured / Burned out' },
        { type: 'race', targetKm: 5, intensity: 'fail', label: 'RACE DAY' }
      ],
      steady: [
        { type: 'run', targetKm: 5, intensity: 'easy', label: 'Easy 5K' },
        { type: 'run', targetKm: 5, intensity: 'easy', label: 'Easy 5K' },
        { type: 'run', targetKm: 7, intensity: 'easy', label: 'Easy 7K' },
        { type: 'run', targetKm: 8, intensity: 'easy', label: 'Easy 8K' },
        { type: 'run', targetKm: 10, intensity: 'easy', label: 'Easy 10K' },
        { type: 'run', targetKm: 12, intensity: 'easy', label: 'Easy 12K' },
        { type: 'run', targetKm: 12, intensity: 'easy', label: 'Same 12K...' },
        { type: 'run', targetKm: 12, intensity: 'easy', label: 'Still 12K...' },
        { type: 'race', targetKm: 15, intensity: 'plateau', label: 'RACE DAY' }
      ],
      strategic: [
        { type: 'run', targetKm: 5, intensity: 'easy', label: 'Base 5K' },
        { type: 'intervals', targetKm: 6, intensity: 'mixed', label: 'Intervals' },
        { type: 'rest', targetKm: 0, intensity: 'rest', label: 'Recovery + Plan' },
        { type: 'run', targetKm: 10, intensity: 'medium', label: 'Long run 10K' },
        { type: 'intervals', targetKm: 8, intensity: 'high', label: 'Speed work' },
        { type: 'rest', targetKm: 0, intensity: 'rest', label: 'Recovery + Adapt' },
        { type: 'run', targetKm: 18, intensity: 'medium', label: 'Long run 18K' },
        { type: 'intervals', targetKm: 10, intensity: 'high', label: 'Race pace' },
        { type: 'race', targetKm: 42, intensity: 'finish', label: 'RACE DAY' }
      ]
    };
    
    class Runner {
      constructor(name, lane, color, plan) {
        this.name = name;
        this.lane = lane;
        this.color = color;
        this.plan = plan;
        this.reset();
      }
      
      reset() {
        this.x = START_X;
        this.y = LANE_Y[this.lane] + GROUND_OFFSET - 30;
        this.baseY = this.y;
        this.currentKm = 0;
        this.targetKm = 0;
        this.maxCapacity = 5;
        this.fatigue = 0; // Accumulated fatigue
        this.frame = 0;
        this.speed = 0;
        this.dayComplete = false;
        this.collapsed = false;
        this.resting = false;
        this.thinking = false;
        this.intervals = false;
        this.message = '';
      }
      
      startDay(dayIndex) {
        const training = this.plan[Math.min(dayIndex, this.plan.length - 1)];
        this.currentKm = 0;
        this.x = START_X;
        this.targetKm = training.targetKm;
        this.dayComplete = false;
        this.collapsed = false;
        this.resting = training.type === 'rest';
        this.thinking = training.type === 'rest';
        this.intervals = training.type === 'intervals';
        this.message = training.label;
        
        // Update capacity based on training type and fatigue
        if (this.name === 'Sprinter') {
          // Sprinter burns out over time
          if (dayIndex < 3) {
            this.maxCapacity = Math.min(12, this.maxCapacity + 1);
          } else {
            this.maxCapacity = Math.max(1, this.maxCapacity - 2);
          }
          this.fatigue += 15;
        } else if (this.name === 'Comfortable') {
          // Slow growth, plateaus at 15
          this.maxCapacity = Math.min(15, this.maxCapacity + 0.8);
          this.fatigue = Math.max(0, this.fatigue - 5);
        } else {
          // Strategic - grows with rest days and smart training
          if (training.type === 'rest') {
            this.fatigue = Math.max(0, this.fatigue - 25);
            this.maxCapacity += 4;
          } else if (training.type === 'intervals') {
            this.maxCapacity += 6;
            this.fatigue += 3;
          } else if (training.type === 'race') {
            // Race day - full capacity available
            this.maxCapacity = 45;
            this.fatigue = 0;
          } else {
            this.maxCapacity += 4;
            this.fatigue += 5;
          }
          this.fatigue = Math.max(0, this.fatigue - 5);
        }
        
        return training;
      }
      
      update() {
        if (this.dayComplete || this.resting) return;
        
        // Check if reached target or max capacity
        const isRaceDay = this.targetKm >= 40;
        const effectiveMax = isRaceDay ? this.maxCapacity : Math.max(1, this.maxCapacity - this.fatigue * 0.1);
        const reachedLimit = this.currentKm >= Math.min(this.targetKm, effectiveMax);
        
        if (reachedLimit || this.collapsed) {
          this.dayComplete = true;
          this.speed = 0;
          return;
        }
        
        // Movement speed varies by runner type
        let baseSpeed = 0.15;
        if (this.name === 'Sprinter') {
          baseSpeed = this.fatigue < 50 ? 0.25 : 0.08;
          if (this.fatigue > 80) {
            this.collapsed = true;
          }
        } else if (this.name === 'Comfortable') {
          baseSpeed = 0.12;
        } else {
          baseSpeed = this.intervals ? 0.2 : 0.15;
        }
        
        this.speed = baseSpeed;
        this.currentKm += baseSpeed * 0.15;
        this.x = kmToX(this.currentKm);
        
        // Animation
        this.frame += this.speed * 0.5;
        if (this.speed > 0) {
          this.y = this.baseY - Math.abs(Math.sin(this.frame * 0.3)) * 4;
        }
      }
      
      draw(isRaceDay) {
        const x = this.x;
        const y = this.resting ? this.baseY : this.y;
        
        // Shadow
        ctx.fillStyle = 'rgba(0,0,0,0.3)';
        ctx.beginPath();
        ctx.ellipse(x, this.baseY + 28, 10, 3, 0, 0, Math.PI * 2);
        ctx.fill();
        
        if (this.collapsed) {
          // Collapsed
          ctx.fillStyle = this.color;
          ctx.globalAlpha = 0.6;
          ctx.fillRect(x - 12, this.baseY + 15, 24, 8);
          ctx.fillStyle = '#ffcc99';
          ctx.fillRect(x + 12, this.baseY + 13, 8, 8);
          ctx.globalAlpha = 1;
          
          // X eyes
          ctx.strokeStyle = '#000';
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.moveTo(x + 14, this.baseY + 15);
          ctx.lineTo(x + 18, this.baseY + 19);
          ctx.moveTo(x + 18, this.baseY + 15);
          ctx.lineTo(x + 14, this.baseY + 19);
          ctx.stroke();
          ctx.lineWidth = 1;
        } else if (this.resting) {
          // Sitting/resting pose
          ctx.fillStyle = this.color;
          ctx.fillRect(x - 6, y + 5, 12, 15);
          ctx.fillStyle = '#ffcc99';
          ctx.fillRect(x - 5, y - 8, 10, 10);
          ctx.fillStyle = '#333';
          ctx.fillRect(x - 8, y + 18, 16, 8);
          
          // Thought bubble
          if (this.thinking) {
            ctx.fillStyle = 'rgba(255,255,255,0.9)';
            ctx.beginPath();
            ctx.ellipse(x + 22, y - 15, 20, 12, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(x + 10, y - 2, 3, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(x + 14, y - 7, 2, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#333';
            ctx.font = '9px Courier New';
            ctx.textAlign = 'center';
            ctx.fillText('planning', x + 22, y - 12);
          }
        } else {
          // Running pose
          ctx.fillStyle = this.color;
          ctx.fillRect(x - 6, y, 12, 16);
          
          ctx.fillStyle = '#ffcc99';
          ctx.fillRect(x - 5, y - 10, 10, 10);
          
          const legOffset = this.speed > 0 ? Math.sin(this.frame * 0.4) * 5 : 0;
          ctx.fillStyle = '#333';
          ctx.fillRect(x - 5, y + 14, 4, 12 + legOffset);
          ctx.fillRect(x + 1, y + 14, 4, 12 - legOffset);
          
          ctx.fillStyle = '#ffcc99';
          ctx.fillRect(x - 9, y + 2 - legOffset * 0.4, 4, 8);
          ctx.fillRect(x + 5, y + 2 + legOffset * 0.4, 4, 8);
          
          // Interval indicator (speed lines)
          if (this.intervals && this.speed > 0) {
            ctx.strokeStyle = this.color;
            ctx.globalAlpha = 0.5;
            for (let i = 0; i < 3; i++) {
              ctx.beginPath();
              ctx.moveTo(x - 15 - i * 5, y + 5 + i * 4);
              ctx.lineTo(x - 25 - i * 5, y + 5 + i * 4);
              ctx.stroke();
            }
            ctx.globalAlpha = 1;
          }
          
          // Fatigue sweat for sprinter
          if (this.name === 'Sprinter' && this.fatigue > 30) {
            ctx.fillStyle = '#66ccff';
            ctx.fillRect(x + 8, y - 5 + Math.sin(this.frame * 0.2) * 2, 2, 3);
          }
        }
        
        // Current km
        ctx.fillStyle = '#888';
        ctx.font = '10px Courier New';
        ctx.textAlign = 'center';
        ctx.fillText(`${this.currentKm.toFixed(1)}km`, x, this.baseY + 45);
        
        // Max capacity indicator
        const capX = kmToX(this.maxCapacity);
        ctx.strokeStyle = this.color;
        ctx.globalAlpha = 0.3;
        ctx.setLineDash([3, 3]);
        ctx.beginPath();
        ctx.moveTo(capX, LANE_Y[this.lane] + 20);
        ctx.lineTo(capX, LANE_Y[this.lane] + GROUND_OFFSET);
        ctx.stroke();
        ctx.setLineDash([]);
        ctx.globalAlpha = 1;
        
        // Name and capacity
        ctx.fillStyle = this.color;
        ctx.font = 'bold 11px Courier New';
        ctx.textAlign = 'left';
        ctx.fillText(this.name.toUpperCase(), 15, LANE_Y[this.lane] + 20);
        ctx.font = '10px Courier New';
        ctx.fillStyle = '#888';
        ctx.fillText(`max: ${this.maxCapacity.toFixed(0)}km`, 15, LANE_Y[this.lane] + 35);
        
        // Message
        ctx.fillStyle = this.color;
        ctx.font = '11px Courier New';
        ctx.textAlign = 'center';
        ctx.fillText(this.message, x, this.baseY - 20);
      }
    }
    
    // Game state
    let runners = [];
    let currentDay = 0;
    let dayTime = 0;
    let phase = 'idle'; // idle, dayRunning, dayEnd, finished
    let animationId;
    let dayTransitionTimer = 0;
    
    function initRunners() {
      runners = [
        new Runner('Sprinter', 0, COLORS.sprinter, TRAINING_PLANS.sprinter),
        new Runner('Comfortable', 1, COLORS.steady, TRAINING_PLANS.steady),
        new Runner('Strategic', 2, COLORS.strategic, TRAINING_PLANS.strategic)
      ];
    }
    
    function startDay() {
      runners.forEach(r => r.startDay(currentDay));
      dayTime = 0;
      phase = 'dayRunning';
    }
    
    function drawBackground() {
      // Sky gradient
      const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
      gradient.addColorStop(0, '#16213e');
      gradient.addColorStop(1, '#1a1a2e');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      // Day counter
      const isRaceDay = currentDay >= 8;
      ctx.fillStyle = isRaceDay ? '#ff0080' : '#00ff88';
      ctx.font = 'bold 16px Courier New';
      ctx.textAlign = 'right';
      ctx.fillText(isRaceDay ? 'üèÅ RACE DAY' : `DAY ${currentDay + 1}`, canvas.width - 20, 35);
      
      // Progress dots
      ctx.textAlign = 'left';
      for (let i = 0; i < 9; i++) {
        ctx.fillStyle = i < currentDay ? '#00ff88' : i === currentDay ? '#fff' : '#333';
        ctx.beginPath();
        ctx.arc(20 + i * 18, 30, i === 8 ? 6 : 4, 0, Math.PI * 2);
        ctx.fill();
      }
      ctx.fillStyle = '#666';
      ctx.font = '9px Courier New';
      ctx.fillText('Training', 20, 50);
      ctx.fillText('Race', 155, 50);
      
      // Lanes
      for (let i = 0; i < 3; i++) {
        const laneY = LANE_Y[i];
        
        ctx.fillStyle = i === 2 ? 'rgba(0, 255, 136, 0.06)' : 'rgba(255, 255, 255, 0.02)';
        ctx.fillRect(0, laneY, canvas.width, LANE_HEIGHT);
        
        ctx.fillStyle = '#2d2d44';
        ctx.fillRect(0, laneY + GROUND_OFFSET, canvas.width, LANE_HEIGHT - GROUND_OFFSET);
        
        // Track lines
        ctx.fillStyle = '#3d3d54';
        for (let j = 0; j < 35; j++) {
          ctx.fillRect(j * 30 + 10, laneY + GROUND_OFFSET + 4, 12, 2);
        }
        
        if (i < 2) {
          ctx.strokeStyle = '#333';
          ctx.setLineDash([6, 6]);
          ctx.beginPath();
          ctx.moveTo(0, laneY + LANE_HEIGHT);
          ctx.lineTo(canvas.width, laneY + LANE_HEIGHT);
          ctx.stroke();
          ctx.setLineDash([]);
        }
      }
      
      // KM markers
      ctx.font = '9px Courier New';
      ctx.textAlign = 'center';
      for (let km = 0; km <= MAX_KM; km += 5) {
        const mx = kmToX(km);
        ctx.strokeStyle = km === 42 ? '#00ff88' : '#444';
        ctx.lineWidth = km === 42 ? 2 : 1;
        ctx.beginPath();
        ctx.moveTo(mx, LANE_Y[0] + 10);
        ctx.lineTo(mx, LANE_Y[2] + LANE_HEIGHT - 5);
        ctx.stroke();
        
        ctx.fillStyle = km === 42 ? '#00ff88' : '#555';
        ctx.fillText(`${km}`, mx, LANE_Y[0] + 5);
      }
      ctx.lineWidth = 1;
      
      // Finish line decoration
      if (isRaceDay) {
        const fx = kmToX(42);
        ctx.fillStyle = '#00ff88';
        ctx.font = 'bold 12px Courier New';
        ctx.fillText('FINISH', fx, LANE_Y[0] - 10);
        
        for (let i = 0; i < 3; i++) {
          for (let j = 0; j < 6; j++) {
            ctx.fillStyle = (j) % 2 === 0 ? '#fff' : '#000';
            ctx.fillRect(fx - 3, LANE_Y[i] + GROUND_OFFSET + j * 7, 6, 7);
          }
        }
      }
    }
    
    function drawEndScreen() {
      ctx.fillStyle = 'rgba(0, 0, 0, 0.9)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      ctx.fillStyle = '#00ff88';
      ctx.font = 'bold 28px Courier New';
      ctx.textAlign = 'center';
      ctx.fillText('THE JOURNEY MATTERS', canvas.width / 2, 80);
      
      // Sprinter result
      ctx.fillStyle = COLORS.sprinter;
      ctx.font = 'bold 16px Courier New';
      ctx.fillText('THE SPRINTER', canvas.width / 2, 140);
      ctx.font = '13px Courier New';
      ctx.fillStyle = '#aaa';
      ctx.fillText('Went all-out every day. No rest. No recovery.', canvas.width / 2, 165);
      ctx.fillText('Burned out before race day. Finished: 5km', canvas.width / 2, 185);
      
      // Steady result
      ctx.fillStyle = COLORS.steady;
      ctx.font = 'bold 16px Courier New';
      ctx.fillText('THE COMFORTABLE', canvas.width / 2, 240);
      ctx.font = '13px Courier New';
      ctx.fillStyle = '#aaa';
      ctx.fillText('Stayed in comfort zone. Never pushed limits.', canvas.width / 2, 265);
      ctx.fillText('Capacity plateaued. Finished: 15km', canvas.width / 2, 285);
      
      // Strategic result
      ctx.fillStyle = COLORS.strategic;
      ctx.font = 'bold 16px Courier New';
      ctx.fillText('THE STRATEGIC', canvas.width / 2, 340);
      ctx.font = '13px Courier New';
      ctx.fillStyle = '#aaa';
      ctx.fillText('Intervals to build speed. Rest days to recover & plan.', canvas.width / 2, 365);
      ctx.fillText('Gradual progression. Finished: 42km ‚úì', canvas.width / 2, 385);
      
      // Lesson
      ctx.fillStyle = '#00ff88';
      ctx.font = 'bold 14px Courier New';
      ctx.fillText('Push ‚Üí Rest ‚Üí Reflect ‚Üí Adapt ‚Üí Repeat', canvas.width / 2, 450);
      ctx.font = '12px Courier New';
      ctx.fillStyle = '#888';
      ctx.fillText('The only path to reaching ambitious goals', canvas.width / 2, 480);
    }
    
    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      if (phase === 'finished') {
        drawEndScreen();
        animationId = requestAnimationFrame(gameLoop);
        return;
      }
      
      drawBackground();
      
      if (phase === 'dayRunning') {
        dayTime++;
        runners.forEach(r => r.update());
        
        // Check if all done for the day
        if (runners.every(r => r.dayComplete || r.resting || r.collapsed)) {
          phase = 'dayEnd';
          dayTransitionTimer = 80;
        }
      }
      
      if (phase === 'dayEnd') {
        dayTransitionTimer--;
        if (dayTransitionTimer <= 0) {
          currentDay++;
          if (currentDay >= 9) {
            phase = 'finished';
          } else {
            startDay();
          }
        }
      }
      
      const isRaceDay = currentDay >= 8;
      runners.forEach(r => r.draw(isRaceDay));
      
      // Day transition overlay
      if (phase === 'dayEnd' && dayTransitionTimer > 60) {
        ctx.fillStyle = `rgba(0,0,0,${(80 - dayTransitionTimer) / 20 * 0.5})`;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
      }
      
      animationId = requestAnimationFrame(gameLoop);
    }
    
    function startJourney() {
      if (phase === 'idle') {
        currentDay = 0;
        startDay();
      }
    }
    
    function resetJourney() {
      phase = 'idle';
      currentDay = 0;
      dayTime = 0;
      initRunners();
    }
    
    document.getElementById('start-btn').addEventListener('click', startJourney);
    document.getElementById('reset-btn').addEventListener('click', resetJourney);
    
    initRunners();
    gameLoop();
  </script>
</body>
</html>
